App={Main:function(){var c=function(){$.fn.datepicker.defaults.autoclose=true;$.fn.datepicker.defaults.format="dd/mm/yyyy"};var b=function(){$("[title]:not(.sidebar-footer *)").tooltipster({theme:"tooltipster-shadow"})};var a=function(){$("#modalPassword button[type=button]:last").hide().on("click",function(){$("#modalPassword form").submit()});$.validator.addMethod("validpassword",function(e,d){return this.optional(d)||(/[A-Z]/.test(e)&&/[0-9]/.test(e)&&/[a-z]/.test(e)&&e.length>7)},"Password strength is too low (include letters, capital letters and digits)");$("#linkChangePassword").on("click",function(d){d.preventDefault();$("#modalPassword").modal().on("hide.bs.modal",function(){$(this).find("form").remove()});$("#modalPassword .modal-body").empty().load(app_user_changepassword_url,function(){$("#modalPassword form").validate({messages:{"form[current_password]":{remote:"Wrong password"}},rules:{"form[current_password]":{remote:{url:app_user_checkpassword_url,type:"post",data:{password:function(){return $("#form_current_password").val()}}}},"form[plainPassword][first]":"validpassword","form[plainPassword][second]":{equalTo:"#form_plainPassword_first"}},errorPlacement:function(e,f){if(!f.data("tooltipster-ns")){f.tooltipster({trigger:"custom",onlyOne:false,position:"bottom-left",positionTracker:true})}f.tooltipster("update",$(e).text());f.tooltipster("show")},success:function(e,f){$(f).tooltipster("hide")},submitHandler:function(){$("#modalPassword form").ajaxSubmit({dataType:"json",beforeSubmit:function(){$("#modalPassword button[type=button]:last").hide()},success:function(e){if(e.result=="success"){$("#modalPassword .modal-body").empty().append($("<div/>").addClass("alert alert-success").text("Password changed successfully!"))}else{$("#modalPassword .modal-body").empty().append($("<div/>").addClass("alert alert-warning").text("Password coold not be changed."))}$("#modalPassword button[type=button]:first").text("Close")}})}});$("#modalPassword button[type=button]").show()})})};return{init:function(){b();c();a()}}}(),Forms:function(){var a=function(){var b=function(d){d.preventDefault();$(this).closest(".item").remove()};var c=function(g){var h=$(this).parent().parent().find(".collection:first"),f=h.data("prototype"),e=h.data("index");if(h.length==0||typeof f=="undefined"||typeof e=="undefined"){return}var d=$(f.replace(/__name__/g,e));h.data("index",e+1);h.append(d);$(d.find("input:text:visible, select:visible, textarea:visible")[0]).focus();h.trigger("item-added.app",{index:e,item:d})};$("body").on("click",".btn-add-item",c);$("body").on("click",".btn-remove-item",b);$(".collection").each(function(){var d=$(this);d.data("index",d.find(">.item").length)})};return{init:function(){a()}}}(),FormSupplier:function(){var b=function(){$("form#supplier input[type=tel]").intlTelInput({allowExtensions:true,autoFormat:false,autoHideDialCode:true,autoPlaceholder:false,defaultCountry:"auto",geoIpLookup:function(c){$.get("http://ipinfo.io",function(){},"jsonp").always(function(e){var d=(e&&e.country)?e.country:"";c(d)})},nationalMode:false,numberType:"MOBILE",preferredCountries:["cu"],utilsScript:"/plugins/intl-tel-input/js/utils.js"});$("form#supplier .collection-employees").on("item-added.app",function(c,d){$(d.item).find("input[type=tel]").intlTelInput({allowExtensions:true,autoFormat:false,autoHideDialCode:true,autoPlaceholder:false,defaultCountry:"auto",geoIpLookup:function(e){$.get("http://ipinfo.io",function(){},"jsonp").always(function(g){var f=(g&&g.country)?g.country:"";e(f)})},nationalMode:false,numberType:"MOBILE",preferredCountries:["cu"],utilsScript:"/plugins/intl-tel-input/js/utils.js"})})};var a=function(){$("#supplier").validate({errorPlacement:function(c,d){if(!d.data("tooltipster-ns")){d.tooltipster({trigger:"custom",onlyOne:false,position:"bottom-left",positionTracker:true})}d.tooltipster("update",$(c).text());d.tooltipster("show")},success:function(c,d){$(d).tooltipster("hide")}})};return{init:function(){b();a()}}}()};(function(c,b){var a=function(g,d,e){var h;return function f(){var k=this,j=arguments;function i(){if(!e){g.apply(k,j)}h=null}if(h){clearTimeout(h)}else{if(e){g.apply(k,j)}}h=setTimeout(i,d||100)}};jQuery.fn[b]=function(d){return d?this.bind("resize",a(d)):this.trigger(b)}})(jQuery,"smartresize");var CURRENT_URL=window.location.href.split("#")[0].split("?")[0],$BODY=$("body"),$MENU_TOGGLE=$("#menu_toggle"),$SIDEBAR_MENU=$("#sidebar-menu"),$SIDEBAR_FOOTER=$(".sidebar-footer"),$LEFT_COL=$(".left_col"),$RIGHT_COL=$(".right_col"),$NAV_MENU=$(".nav_menu"),$FOOTER=$("footer");$(document).ready(function(){var a=function(){$RIGHT_COL.css("min-height",$(window).height());var d=$BODY.outerHeight(),b=$BODY.hasClass("footer_fixed")?-10:$FOOTER.height(),e=$LEFT_COL.eq(1).height()+$SIDEBAR_FOOTER.height(),c=d<e?e:d;c-=$NAV_MENU.height()+b;$RIGHT_COL.css("min-height",c)};$SIDEBAR_MENU.find("a").on("click",function(b){var c=$(this).parent();if(c.is(".active")){c.removeClass("active active-sm");$("ul:first",c).slideUp(function(){a()})}else{if(!c.parent().is(".child_menu")){$SIDEBAR_MENU.find("li").removeClass("active active-sm");$SIDEBAR_MENU.find("li ul").slideUp()}c.addClass("active");$("ul:first",c).slideDown(function(){a()})}});$MENU_TOGGLE.on("click",function(){if($BODY.hasClass("nav-md")){$SIDEBAR_MENU.find("li.active ul").hide();$SIDEBAR_MENU.find("li.active").addClass("active-sm").removeClass("active")}else{$SIDEBAR_MENU.find("li.active-sm ul").show();$SIDEBAR_MENU.find("li.active-sm").addClass("active").removeClass("active-sm")}$BODY.toggleClass("nav-md nav-sm");a()});$SIDEBAR_MENU.find('a[href*="'+CURRENT_URL+'"]:first').parent("li").addClass("current-page");$SIDEBAR_MENU.find("a").filter(function(){return this.href!==""&&CURRENT_URL.search(this.href)!==-1}).parent("li").addClass("current-page").parents("ul").slideDown(function(){a()}).parent().addClass("active");$(window).smartresize(function(){a()});a();if($.fn.mCustomScrollbar){$(".menu_fixed").mCustomScrollbar({autoHideScrollbar:true,theme:"minimal",mouseWheel:{preventDefault:true}})}});$(document).ready(function(){$(".collapse-link").on("click",function(){var a=$(this).closest(".x_panel"),b=$(this).find("i"),c=a.find(".x_content");if(a.attr("style")){c.slideToggle(200,function(){a.removeAttr("style")})}else{c.slideToggle(200);a.css("height","auto")}b.toggleClass("fa-chevron-up fa-chevron-down")});$(".close-link").click(function(){var a=$(this).closest(".x_panel");a.remove()})});$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip({container:"body"})});if($(".progress .progress-bar")[0]){$(".progress .progress-bar").progressbar()}$(document).ready(function(){if($(".js-switch")[0]){var a=Array.prototype.slice.call(document.querySelectorAll(".js-switch"));a.forEach(function(b){var c=new Switchery(b,{color:"#26B99A"})})}});$(document).ready(function(){if($("input.flat")[0]){$(document).ready(function(){$("input.flat").iCheck({checkboxClass:"icheckbox_flat-green",radioClass:"iradio_flat-green"})})}});$("table input").on("ifChecked",function(){checkState="";$(this).parent().parent().parent().addClass("selected");countChecked()});$("table input").on("ifUnchecked",function(){checkState="";$(this).parent().parent().parent().removeClass("selected");countChecked()});var checkState="";$(".bulk_action input").on("ifChecked",function(){checkState="";$(this).parent().parent().parent().addClass("selected");countChecked()});$(".bulk_action input").on("ifUnchecked",function(){checkState="";$(this).parent().parent().parent().removeClass("selected");countChecked()});$(".bulk_action input#check-all").on("ifChecked",function(){checkState="all";countChecked()});$(".bulk_action input#check-all").on("ifUnchecked",function(){checkState="none";countChecked()});function countChecked(){if(checkState==="all"){$(".bulk_action input[name='table_records']").iCheck("check")}if(checkState==="none"){$(".bulk_action input[name='table_records']").iCheck("uncheck")}var a=$(".bulk_action input[name='table_records']:checked").length;if(a){$(".column-title").hide();$(".bulk-actions").show();$(".action-cnt").html(a+" Records Selected")}else{$(".column-title").show();$(".bulk-actions").hide()}}$(document).ready(function(){$(".expand").on("click",function(){$(this).next().slideToggle(200);$expand=$(this).find(">:first-child");if($expand.text()=="+"){$expand.text("-")}else{$expand.text("+")}})});if(typeof NProgress!="undefined"){$(document).ready(function(){NProgress.start()});$(window).load(function(){NProgress.done()})};