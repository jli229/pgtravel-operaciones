$(document).ready(function(){$("#reservation_form_services").find(".datepicker").datetimepicker({format:"DD/MM/YYYY HH:mm"});+(function(){$("body").on("click",".btn-add-item",function(d){var c=$(this);if(c.is("a")){d.preventDefault()}var e=$(c.data("collection")),b=e.data("index"),a=e.data("prototype");$counter=e.data("counter")?$(e.data("counter")):null;$item=$(a.replace(/__name__/g,b));e.data("index",b+1);if($counter){$counter.val(parseInt($counter.val(),10)+1)}e.append($item);$item.find(".datepicker").datetimepicker({format:"DD/MM/YYYY HH:mm"});$item.find("input:text:first").focus();if(e.closest("div.x_panel").find("h2").data("tooltipster-ns")){e.closest("div.x_panel").find("h2").tooltipster("hide")}$("body").animate({scrollTop:$item.offset().top},500)});$("body").on("click",".btn-remove-item",function(b){var a=$(this);if(a.is("a")){b.preventDefault()}a.closest(".item").fadeOut(function(){var d=$(this).closest(".collection"),c=d.data("counter")?$(d.data("counter")):null;$(this).remove();if(c){c.val(c.val()-1)}})})}());+(function(){$("#reservation").validate({errorPlacement:function(a,b){if(b.is(":hidden")){b=b.closest(":visible")}if(!b.data("tooltipster-ns")){b.tooltipster({trigger:"custom",onlyOne:false,position:"bottom-left",positionTracker:true})}b.tooltipster("update",$(a).text());b.tooltipster("show")},ignore:"",messages:{servicesCounter:{min:"Add a service at least"}},rules:{servicesCounter:{min:1},"reservation_form[directClientFullName]":{required:{depends:function(){return $("#reservation_form_clientType_1").prop("checked")===true}}},"reservation_form[client]":{required:{depends:function(){return $("#reservation_form_clientType_0").prop("checked")===true}}}},success:function(b,c){var a=$(c);if(a.is(":hidden")){a=a.closest(":visible")}a.tooltipster("hide")}})}());+(function(){$("body").on("click",".btn-search-service",function(){var a=$(this).closest(".item");$("#searchServiceModal").data("item",a).modal({backdrop:"static"});$("#searchServiceModal .modal-body").empty().append($("<p>Cargando datos...</p>")).load(url_searchservice)})}());+(function(b){var a=function(c){return isNaN(parseFloat(c))?0:parseFloat(c)};b("#btnRecalc").on("click",function(){var d=new Number(0);b(".item-service").each(function(){d+=a(b(this).find('input[name*="[supplierPrice]"]').val())});var c=new Number(0);b(".item-administrative-charge").each(function(){c+=a(b(this).find('input[name*="[price]"]').val())});b("#reservation_form_clientCharge").val((new Number(d*0.3+d+c)).toFixed(2))})}(jQuery));+(function(a){a("body").on("click","button.btn-calc-ads",function(){var c=a(this).closest(".item"),b=c.find('input[name*="[factor]"]'),e=c.find('input[name*="[base]"]'),d=c.find('input[name*="[price]"]'),f=(new Number(parseFloat(b.val()?b.val():0)*parseFloat(e.val()?e.val():0))).toFixed(2);d.vbtnReal(f)})}(jQuery))});