$(document).ready(function(){var a=$("#datatable-x");a.on("click",".btn-change-state",function(c){c.preventDefault();var b=$(".modal#modal-change");b.data("process",$(this));$(this).attr("disabled","disabled");b.modal();b.find(".modal-content").empty().append($('<div class="modal-body"><p>'+Translator.trans("Loading data...")+"</p></div>")).load($(this).attr("href"),function(){b.data("process").removeAttr("disabled");b.find("form").ajaxForm({dataType:"json",success:function(e){b.modal("hide");$(b.data("process")).parent().text(Translator.trans("Updating..."));a.dataTable().api().draw(false)}});var d=b.find(".collection");d.data("index",d.find(".item").length);b.find(".btn-add-item").on("click",function(){var g=b.find(".collection"),f=g.data("prototype"),e=g.data("index");$item=$(f.replace(/__name__/g,e)).appendTo(g);g.data("index",e+1)})})});a.on("click",".btn-view",function(d){d.preventDefault();var b=$(".modal#modal-view"),c=$(this).data("cancel-url");b.modal();b.find(".modal-content").empty().load($(this).attr("href"),function(){b.find("a.btn-danger").attr("href",c)})});a.dataTable({order:[[2,"desc"]],aoColumns:[{name:"client"},{name:"name"},{name:"startAt",searchable:false},{name:"endAt",searchable:false},{name:"price",searchable:false},{name:"date"},{name:"notes"},{sortable:false,searchable:false}],serverSide:true,processing:true,ajax:{method:"post",url:Routing.generate("app_cxcobrar_getdata"),data:function(b){return $.extend({},b,{filter:{state:$('form#filter select[name$="[state]"]').val()}})}}});$("form#filter select").on("change",function(){a.dataTable().api().draw(true)})});