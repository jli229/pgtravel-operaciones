$(document).ready(function(){var a=$("#datatable-offers");a.on("click","a.btn-cancel",function(c){c.preventDefault();var d=$(this),b=d.attr("href");swal({title:Translator.trans("Confirm operation"),text:Translator.trans("The record will be cancelled. Are you sure you want to continue?"),type:"warning",showCancelButton:true,confirmButtonColor:"#d9534f"},function(e){if(e){d.closest("td").text(Translator.trans("Updating...")).closest("tr").addClass("row-removing");$.ajax(b,{dataType:"json",method:"post",success:function(f){a.dataTable().api().draw(false)}})}})});a.dataTable({order:[[2,"desc"]],columnDefs:[{searchable:false,sortable:false,targets:[4],width:"130px"},{name:"state",searchable:true,targets:[0],title:Translator.trans("State")},{name:"name",targets:[1],title:Translator.trans("Name")},{name:"client",targets:[2],title:Translator.trans("Client")},{name:"startAt",searchable:false,targets:[3],title:Translator.trans("Date")}],processing:true,serverSide:true,ajax:{method:"post",url:Routing.generate("app_offers_getdata"),data:function(b){return $.extend(true,b,{filter:{state:$('form#filter select[name$="[state]"]').val(),cancelled:$('form#filter select[name$="[cancelled]"]').val(),fromDate:$('form#filter input:text[name$="[fromDate]"]').val(),toDate:$('form#filter input:text[name$="[toDate]"]').val()}})}}});+(function(b){b('form#filter input[name$="[fromDate]"]').parent().datetimepicker({format:"DD/MM/YYYY"});b('form#filter input[name$="[toDate]"]').parent().datetimepicker({format:"D/MM/YYYY",useCurrent:false});b('form#filter input[name$="[fromDate]"]').parent().on("dp.change",function(c){b('form#filter input[name$="[toDate]"]').parent().data("DateTimePicker").minDate(c.date);a.DataTable().draw(false)});b('form#filter input[name$="[toDate]"]').parent().on("dp.change",function(c){b('form#filter input[name$="[fromDate]"]').parent().data("DateTimePicker").maxDate(c.date);a.DataTable().draw(false)});b("form#filter select").on("change",function(){a.DataTable().draw(false)})}(jQuery));$("body").on("click","a.btn-delete",function(c){c.preventDefault();var b=$(this).attr("href"),d=$(this);swal({title:Translator.trans("Confirm remove"),text:Translator.trans("The record will be removed. Are you sure you want to continue?"),type:"warning",showCancelButton:true,confirmButtonColor:"#d9534f"},function(e){if(e){d.closest("td").text(Translator.trans("Removing...")).closest("tr").addClass("row-removing");$.ajax(b,{dataType:"json",method:"post",success:function(f){a.find("tr.row-removing").remove();a.dataTable().api().draw(false)}})}})});$("body").on("click","a.btn-promote",function(c){c.preventDefault();var b=$(this).attr("href"),d=$(this);swal({title:Translator.trans("Confirm move"),text:Translator.trans("The record will be moved to the official operation. Are you sure you want to continue?"),type:"warning",showCancelButton:true,confirmButtonColor:"#337ab7"},function(e){if(e){d.closest("td").text(Translator.trans("Moving...")).closest("tr").addClass("row-promoting");$.ajax(b,{dataType:"json",method:"post",success:function(f){a.find("tr.row-promoting").remove();a.dataTable().api().draw(false)}})}})})});